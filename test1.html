<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Déchiffrement</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1c1c1c;
            color: white;
            text-align: center;
            padding-top: 50px;
        }

        #cipherWord {
            font-size: 2em;
            letter-spacing: 2px;
            color: #ff4d4d;
            font-weight: bold;
        }

        #userInput {
            margin-top: 20px;
            padding: 10px;
            font-size: 1.2em;
            width: 300px;
            border: 2px solid #ff4d4d;
            border-radius: 5px;
            background-color: #333;
            color: white;
        }

        #resultMessage {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }

        #timer {
            margin-top: 20px;
            font-size: 1.2em;
            color: #ffcc00;
        }

        /* Effet de néon */
        .neon {
            text-shadow: 0 0 5px #ff4d4d, 0 0 10px #ff4d4d, 0 0 20px #ff4d4d;
        }

        /* Clignotement du message de résultat */
        @keyframes flicker {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .flicker {
            animation: flicker 0.5s infinite;
        }
    </style>
</head>
<body>
    <h1>Jeu de Déchiffrement</h1>

    <p>Le mot à déchiffrer :</p>
    <p id="wordToDecrypt" class="neon"></p>

    <input type="text" id="userInput" placeholder="Entrez votre mot déchiffré">
    <button onclick="checkWord()">Vérifier</button>
    <button onclick="resetGame()">Recommencer</button>

    <p id="timer"></p>
    <p id="resultMessage"></p>

    <script>
        let plainWord = generateWord();
        let shift = generateShift();
        let cipherWord = applyShift(plainWord, shift);
        let timerValue = 30;
        let timerInterval;

        function generateWord() {
            const words = ["bonjour", "amour", "paris", "voiture", "elephant", "ordinateur"];
            return words[Math.floor(Math.random() * words.length)];
        }

        function generateShift() {
            return Math.floor(Math.random() * 26); // Décalage aléatoire entre 0 et 25
        }

        function applyShift(word, shift) {
            const alphabet = "abcdefghijklmnopqrstuvwxyz";
            let result = "";

            for (let i = 0; i < word.length; i++) {
                const index = alphabet.indexOf(word[i]);
                if (index !== -1) {
                    result += alphabet[(index + shift) % 26];
                } else {
                    result += word[i];
                }
            }

            return result;
        }

        function checkWord() {
            const userInput = document.getElementById("userInput").value.toLowerCase();
            const decodedWord = applyShift(cipherWord, 26 - shift);

            if (userInput === decodedWord) {
                document.getElementById("resultMessage").textContent = "Bravo! Vous avez trouvé le mot!";
                document.getElementById("resultMessage").style.color = "#00ff00";
                document.getElementById("resultMessage").classList.remove("flicker");
                clearInterval(timerInterval); // Stop le chronomètre à la réussite
            } else {
                document.getElementById("resultMessage").textContent = "Ce n'est pas le bon mot. Essayez encore!";
                document.getElementById("resultMessage").style.color = "#ff0000";
                document.getElementById("resultMessage").classList.add("flicker");
            }
        }

        function resetGame() {
            plainWord = generateWord();
            shift = generateShift();
            cipherWord = applyShift(plainWord, shift);
            document.getElementById("userInput").value = "";
            document.getElementById("resultMessage").textContent = "";
            document.getElementById("resultMessage").classList.remove("flicker");
            document.getElementById("wordToDecrypt").textContent = cipherWord;
            startTimer();
        }

        function startTimer() {
            clearInterval(timerInterval);  // Clear any existing timer
            timerInterval = setInterval(function() {
                timerValue--;
                document.getElementById("timer").textContent = "Temps restant : " + timerValue;
                if (timerValue <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById("resultMessage").textContent = "Le temps est écoulé!";
                    document.getElementById("resultMessage").style.color = "#ff0000";
                    document.getElementById("resultMessage").classList.add("flicker");
                }
            }, 1000);
        }

        window.onload = function() {
            document.getElementById("wordToDecrypt").textContent = cipherWord;
            startTimer();
        };
    </script>
</body>
</html>
